(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{135:function(e,t,n){},159:function(e,t,n){e.exports=n(326)},164:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(38),c=n.n(s),u=(n(164),n(16)),o=n(17),i=n(19),l=n(18),m=n(20),p=n(35),h=n(30),d=n.n(h),g=function(e){return{type:"UPDATE_USER",user:e}},b=function(e){return{type:"UPDATE_USERLIST",list:e}},f=function(e){return console.log("inserting new user: ".concat(e)),{type:"ADD_USER",user:e}},E=n(92),O=n(333),j=function(e){return{type:"UPDATE_TEXT",text:e}},v=function(){return function(e,t){d.a.post("/messanger/postMessage",{message:t().messageReducer.text,author:t().userReducer.currentUser}).then(function(){}).catch(function(e){return console.log(e)}),e(j(""))}},U=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("aside",{id:"sidebar",className:"sidebar"},r.a.createElement("div",{className:"ui fluid container"},r.a.createElement("ul",null,this.props.users.map(function(e,t){return r.a.createElement("li",{key:t},e.username)}))))}}]),t}(a.Component),y=function(e){var t=e.message,n=e.author;return r.a.createElement("p",null,r.a.createElement("i",null,n,": ",t," "))},S=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{id:"messages-list"},r.a.createElement("ul",null,this.props.messages.map(function(t,n){return r.a.createElement(y,{key:n,message:t.message,author:t.author===e.props.currentUser?"me":t.author})})))}}]),t}(a.Component),w=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).onSubmit=function(){n.props.submitMessage()},n.handleTextChange=function(e){n.props.handlTextChange(e.target.value)},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("section",{id:"new-message"},r.a.createElement("input",{type:"text",value:this.props.text,onChange:this.handleTextChange,placeholder:"Type here to chat..",onKeyPress:function(t){"Enter"===t.key&&e.props.submitMessage()}}))}}]),t}(a.Component),R={handlTextChange:j,submitMessage:v},T=Object(p.b)(function(e){return{messages:e.messageReducer.messages,text:e.messageReducer.text,user:e.userReducer.currentUser,userList:e.userReducer.userList}},R)(w),C=n(334),k=n(332),x=function(e){function t(){return Object(u.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(C.a,{style:{marginBottom:0,border:"1px solid #3f3f3f"}},r.a.createElement(C.a.Menu,null,r.a.createElement(C.a.Item,null,r.a.createElement("h2",null,"Developer Chat : Final Project"))),r.a.createElement(C.a.Menu,{position:"right"},r.a.createElement(C.a.Item,null,r.a.createElement(k.a,{color:"blue",onClick:this.props.logOutButton},"Log Out"))))}}]),t}(a.Component),A=(n(135),function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).logOut=function(){return n.props.deleteUser(n.props.user),n.props.setUsername(""),r.a.createElement(O.a,{to:"./Login"})},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.a.get("/messanger/getMessages").then(function(t){console.log(t.data);var n=t.data.map(function(e){e._id;return Object(E.a)(e,["_id"])});e.props.updateMessages(n)}).catch(function(e){console.log(e)}),d.a.get("/messanger/getUsers").then(function(t){var n=t.data.map(function(e){e._id;return Object(E.a)(e,["_id"])});e.props.updateUserList(n)}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(x,{logOutButton:this.logOut}),r.a.createElement("div",{id:"container"},r.a.createElement(U,{users:this.props.userList}),r.a.createElement("section",{id:"main"},r.a.createElement(S,{messages:this.props.messages,currentUser:this.props.user}),r.a.createElement(T,null))))}}]),t}(a.Component)),D={updateMessages:function(e){return{type:"UPDATE_MESSAGES",messages:e}},updateUserList:b,handlTextChange:j,submitMessage:v,deleteUser:function(e){return function(t,n){d.a.get("/messanger/deleteUser",{username:e}).then(function(){}).catch(function(e){return console.log(e)}),t(g("")),t(b([]))}}},M=Object(p.b)(function(e){return{messages:e.messageReducer.messages,text:e.messageReducer.text,user:e.userReducer.currentUser,userList:e.userReducer.userList}},D)(A),_=n(31),L=(n(325),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).onSubmit=n.onSubmit.bind(Object(_.a)(Object(_.a)(n))),n.onChange=n.onChange.bind(Object(_.a)(Object(_.a)(n))),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"onSubmit",value:function(e){e.preventDefault(),this.props.setUsername(e.target.username.value)}},{key:"onChange",value:function(e){this.setState({username:e.target.value})}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("div",{className:"widget"},r.a.createElement("h2",null,"Welcome to our Chat Application!"),r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{type:"text",placeholder:"Please enter a username here: ",id:"username",onChange:this.onChange}),r.a.createElement("input",{type:"submit",value:"Join Chat"})))))}}]),t}(a.Component)),P=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(r)))).state={username:null},n.setUsername=function(e){console.log("setUsername: ".concat(e)),n.setState({username:e}),n.props.submitUser(e)},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"main app"},this.state.username?r.a.createElement(M,{setUsername:this.setUsername}):r.a.createElement(L,{setUsername:this.setUsername}))}}]),t}(a.Component),N={updateUser:g,addUser:f,submitUser:function(e){return function(t,n){t(g(e)),d.a.post("/messanger/postUser",{username:e}).then(function(){}).catch(function(e){return console.log(e)}),t(f(n().userReducer.currentUser))}}},I=Object(p.b)(function(e){return{currentUser:e.userReducer.currentUser}},N)(P);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var B=n(34),W=n(148),G=n(149),J=n(69),X=n(36),F={messages:[],text:""},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MESSAGES":return Object(X.a)({},e,{messages:t.messages});case"UPDATE_TEXT":return Object(X.a)({},e,{text:t.text});case"INSERT_MESSAGE":return Object(X.a)({},e,{messages:[].concat(Object(J.a)(e.messages),[t.message])});default:return e}},$={userList:[],currentUser:"timmy"},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_USER":return Object(X.a)({},e,{currentUser:t.user});case"UPDATE_USERLIST":return Object(X.a)({},e,{userList:t.list});case"ADD_USER":return Object(X.a)({},e,{userList:[].concat(Object(J.a)(e.userList),[t.user])});default:return e}};var z=function(e){var t=[W.a],n=[B.applyMiddleware.apply(void 0,t)],a=G.composeWithDevTools.apply(void 0,n),r=Object(B.combineReducers)({messageReducer:K,userReducer:q});return Object(B.createStore)(r,e,a)}();new WebSocket("ws://localhost:4000/websocket").onmessage=function(e){console.log("index.js: "+e.data);var t,n=JSON.parse(e.data);z.dispatch((t=n,console.log("inserting message"),{type:"INSERT_MESSAGE",message:t}))},c.a.render(r.a.createElement(p.a,{store:z},r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[159,1,2]]]);
//# sourceMappingURL=main.2451bedd.chunk.js.map